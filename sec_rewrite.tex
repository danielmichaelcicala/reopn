%
% rewriting open objects
% double pushout rewriting
%

\documentclass[master]{subfiles}
\begin{document}         

\section{Rewriting}

\begin{df} \label{df_rw_adhesive-category}
	A category with pullbacks is \defn{adhesive} if pushouts along monics exist and are \emph{Van Kampen}.
\end{df} 

\begin{thm} \label{thm_rw_topoi-adhesive}
	Topoi are adhesive.
\end{thm}

\begin{cor} \label{thm_rw_category-StrCsp-adhsv}
	Let $ L \dashv R \from \A \to \X $ be an adjunction between topoi.  The category $ \StrCsp{L} $ is adhesive.
\end{cor}

\begin{df} \label{df_rw_rewrite-rule}
	For $ \C $ an adhesive category, an \defn{$ \C $-rewrite rule} (often called a production) is a span $ a \gets b \to c $ inside $ \C $.  When both legs of the span are monic, we say the rewrite rule is \defn{linear}.
\end{df}	

\begin{df} \label{df_rw_pushout-complement}
	Given composable arrows $ a \to b \to y $ we say that an arrow $ a \to x $ is a \defn{pushout complement} if it fits into a pushout diagram \[ \diagram{diag_rw_pushout-comp} \]
\end{df}

\begin{df} \label{df_rw_derived-rewrite-rule}
	Given a $ \C $-rewrite rule $ a \gets b \to c $ and a $ \C $-arrow $a \to x$ such that $ b \to a \to x $ has a pushout complement, a \defn{derived (linear) rewrite rule} is the bottom row of the induced double pushout diagram \[ \diagram{diag_rw_derived-rule} \]
\end{df}

\begin{df} \label{df_rw_grammar-and-language}
	A \defn{(linear) grammar} consists of an adhesive category $ \A $ and a set of (linear) $ \A $-rewrite rules.  Observe that $ \A $-rewrite rules are actually arrows in $ \Span (\A) $.  Given a grammar $ \Gamma $, the subcategory $ \mathcal{L} ( \Gamma ) $ of $ \Span (\A)  $ generated by the set of rewrites derived from $ \Gamma $ is called a \defn{language}.  
\end{df}

\begin{lem} \label{thm_rw_open-objects-language}
	Let $ (\A , \otimes_{\A} , I_{\A}) $ be a symmetric monoidal category with pullbacks and $ (\X , \otimes_{\X} , I_{\X}) $ be a symmetric monoidal topos.  Let $ L \dashv R \from \A \to \X $ be an adjunction where $ L $ preserves pullbacks.
	
	Fix a grammar $ \Gamma $ in the topos $ \StrCsp{L} $.  The generated  language $ \mathcal{L}(\Gamma) $ is a sub-bicategory of $ \Sp{\StrCsp{L}} $. 
\end{lem}

\end{document}
